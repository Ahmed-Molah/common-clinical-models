<!DOCTYPE html><html ng-app="cds_app">
<head>
<title>{{def.concept.name}}</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" type="text/css" href="wro/foundation.css"/>
<link rel="stylesheet" type="text/css" href="wro/date-picker.css"/>
<link rel="stylesheet" type="text/css" href="wro/angular.css"></link>
<script type="text/javascript" src="wro/angular.js"></script>
<link rel="text/javascript" type="text/css" href="wro/foundation.js"/>
<script type="text/javascript" src="wro/moment.js"></script>
<script type="text/javascript" src="wro/date-picker.js"></script>
<script type="text/javascript" src="wro/app_lib.js"></script>
<script id="decision-support-view" type="application/json">{
  "dsViewId": "MADRS-S.v1",
  "language": {
    "originalLanguage": {
      "terminologyId": {
        "name": "ISO_639-1",
        "value": "ISO_639-1"
      },
      "codeString": "en"
    }
  },
  "decisionSupportViewDefinitions": {
    "en": {
      "name": "Montgomery Åsberg Depression Rating Scale (self rated)"
    }
  },
  "resourceDescription": {
    "originalAuthor": {
      "organisation": "Cambio Healthcare Systems",
      "name": "Oskar Nielsen",
      "date": "2016-08-16"
    },
    "otherContributors": [],
    "details": {
      "en": {
        "keywords": []
      }
    },
    "otherDetails": {}
  },
  "alertGuideIds": [
  ],
  "executionGuideIds": [
    "MADRS_Assessment.v1",
    "MADRS-S.v1"
  ],
  "alertBindings": {},
  "termDefinitions": {
    "en": {
      "id": "en",
      "terms": {
		"vt0001":{
            "id": "vt0001",
            "text": "None or very mild depression"
	 	},
		"vt0002":{
            "id": "vt0002",
            "text": "Mild depression"
	 	},
		"vt0003":{
            "id": "vt0003",
            "text": "Moderate depression"
	 	},
		"vt0004":{
            "id": "vt0004",
            "text": "Severe depression"
	 	}
	 	}
    },
    "sv": {
      "id": "sv",
      "terms": {
		"vt0001":{
            "id": "vt0001",
            "text": "Ingen eller mycket lätt depression"
	 	},
		"vt0002":{
            "id": "vt0002",
            "text": "Lätt depression"
	 	},
		"vt0003":{
            "id": "vt0003",
            "text": "Måttlig depression"
	 	},
		"vt0004":{
            "id": "vt0004",
            "text": "Svår depression"
	 	}
		}
    }
  }
}
</script>
</head>
<body ng-controller="cds_controller">
	
<!--TERMS-->
<#assign first_selection = "def.terms['vt0001']"/>
<#assign second_selection = "def.terms['vt0002']"/>
<#assign third_selection = "def.terms['vt0003']"/>
<#assign fourth_selection = "def.terms['vt0004']"/>

<!--AUTOGENERATED TERMS-->
<#assign montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data = "data.ehr['openEHR-EHR-OBSERVATION.madrs_s.v1']">
<#assign montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data = "data.cds['openEHR-EHR-OBSERVATION.madrs_s.v1']">
<#assign montgomery_åsberg_depression_rating_scale__madrs_s__entry_def = "def.entries['openEHR-EHR-OBSERVATION.madrs_s.v1']">
<#assign _1__mood_def = montgomery_åsberg_depression_rating_scale__madrs_s__entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0004}']">
<#assign _8__pessimism_def = montgomery_åsberg_depression_rating_scale__madrs_s__entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0060}']">
<#assign _4__appetite_def = montgomery_åsberg_depression_rating_scale__madrs_s__entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0028}']">
<#assign _9__zest_for_life_def = montgomery_åsberg_depression_rating_scale__madrs_s__entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0068}']">
<#assign _7__emotional_involvement_def = montgomery_åsberg_depression_rating_scale__madrs_s__entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0052}']">
<#assign _5__ability_to_concentrate_def = montgomery_åsberg_depression_rating_scale__madrs_s__entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0036}']">
<#assign total_score_def = montgomery_åsberg_depression_rating_scale__madrs_s__entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0076}']">
<#assign _6__initiative_def = montgomery_åsberg_depression_rating_scale__madrs_s__entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0044}']">
<#assign _2__feelings_of_unease_def = montgomery_åsberg_depression_rating_scale__madrs_s__entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0012}']">
<#assign _3__sleep_def = montgomery_åsberg_depression_rating_scale__madrs_s__entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0020}']">
<#assign event_time_def = montgomery_åsberg_depression_rating_scale__madrs_s__entry_def + ".elements['/data/events/time']">
<#assign _1__mood_ehr_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0004}']">
<#assign _8__pessimism_ehr_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0060}']">
<#assign _4__appetite_ehr_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0028}']">
<#assign _9__zest_for_life_ehr_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0068}']">
<#assign _7__emotional_involvement_ehr_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0052}']">
<#assign _5__ability_to_concentrate_ehr_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0036}']">
<#assign total_score_ehr_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0076}']">
<#assign _6__initiative_ehr_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0044}']">
<#assign _2__feelings_of_unease_ehr_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0012}']">
<#assign _3__sleep_ehr_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0020}']">
<#assign event_time_ehr_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_ehr_data + "[0].elements['/data/events/time']">
<#assign _1__mood_cds_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0004}']">
<#assign _8__pessimism_cds_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0060}']">
<#assign _4__appetite_cds_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0028}']">
<#assign _9__zest_for_life_cds_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0068}']">
<#assign _7__emotional_involvement_cds_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0052}']">
<#assign _5__ability_to_concentrate_cds_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0036}']">
<#assign total_score_cds_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0076}']">
<#assign _6__initiative_cds_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0044}']">
<#assign _2__feelings_of_unease_cds_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0012}']">
<#assign _3__sleep_cds_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0020}']">
<#assign event_time_cds_data = montgomery_åsberg_depression_rating_scale__madrs_s__entry_cds_data + "[0].elements['/data/events/time']">
<#assign madrs_depression_assessment_entry_cds_data = "data.cds['openEHR-EHR-EVALUATION.madrs_s_depression_assessment.v1']">
<#assign madrs_depression_assessment_entry_def = "def.entries['openEHR-EHR-EVALUATION.madrs_s_depression_assessment.v1']">
<#assign grade_of_depression_def = madrs_depression_assessment_entry_def + ".elements['/data{at0001}/items{at0006}']">
<#assign grade_of_depression_cds_data = madrs_depression_assessment_entry_cds_data + "[0].elements['/data{at0001}/items{at0006}']">

<script> 
angular.module('cds_app').controller('MADRS-S_Ctrl', function($scope, $window){
  $scope.$on('json_loaded', function(){
    $scope.${event_time_ehr_data}.value.value = new Date().toISOString();
    $scope.${_1__mood_ehr_data}.value.selection = $scope.findMin($scope.${_1__mood_def});
	$scope.${_2__feelings_of_unease_ehr_data}.value.selection = $scope.findMin($scope.${_2__feelings_of_unease_def});
	$scope.${_3__sleep_ehr_data}.value.selection = $scope.findMin($scope.${_3__sleep_def});
	$scope.${_4__appetite_ehr_data}.value.selection = $scope.findMin($scope.${_4__appetite_def});
	$scope.${_5__ability_to_concentrate_ehr_data}.value.selection = $scope.findMin($scope.${_5__ability_to_concentrate_def});
	$scope.${_6__initiative_ehr_data}.value.selection = $scope.findMin($scope.${_6__initiative_def});
	$scope.${_7__emotional_involvement_ehr_data}.value.selection = $scope.findMin($scope.${_7__emotional_involvement_def});
	$scope.${_8__pessimism_ehr_data}.value.selection = $scope.findMin($scope.${_8__pessimism_def});
	$scope.${_9__zest_for_life_ehr_data}.value.selection = $scope.findMin($scope.${_9__zest_for_life_def});
  });
});
</script>

<div ng-show="ready" ng-controller="MADRS-S_Ctrl">
<div class="row" id="test">
	<div class="medium-12 column">
	<h1>{{${montgomery_åsberg_depression_rating_scale__madrs_s__entry_def}.name}}</h1>
		<div class="row">
			<div class="medium-7 column">{{${montgomery_åsberg_depression_rating_scale__madrs_s__entry_def}.description}}</div>
			<div class="medium-5 column">
				<fieldset style="margin-bottom: 15px">
					<legend>{{${madrs_depression_assessment_entry_def}.name}}</legend>
					<div class="row collapse">
					<div class="medium-10 columns"><p>{{${first_selection}.text}}</p></div>
					<div class="medium-2 columns"><p>0-12p</p></div>
					</div>
					<div class="row collapse">
					<div class="medium-10 columns"><p>{{${second_selection}.text}}</p></div>
					<div class="medium-2 columns"><p>13-19p</p></div>
					</div>
					<div class="row collapse">
					<div class="medium-10 columns"><p>{{${third_selection}.text}}</p></div>
					<div class="medium-2 columns"><p>20-34p</p></div>
					</div>
					<div class="row collapse">
					<div class="medium-10 columns"><p>{{${fourth_selection}.text}}</p></div>
					<div class="medium-2 columns"><p>>34p</p></div>
					</div>
				</fieldset>
			</div>
		</div>
	</div>
</div>
<div class="row">
<div class="medium-12 column">
<form name="form">
	<table>
		<tbody>
		<tr>
			<th>{{${_1__mood_def}.name}}</th>
			<td>{{${_1__mood_def}.description}}
			<select ng-model="${_1__mood_ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${_1__mood_def}.selections" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }" ng-change="execute()">{{key}} - {{desc}}</select></td>
		</tr>
		<tr>
			<th>{{${_2__feelings_of_unease_def}.name}}</th>
			<td>{{${_2__feelings_of_unease_def}.description}}
			<select ng-model="${_2__feelings_of_unease_ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${_2__feelings_of_unease_def}.selections" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }" ng-change="execute()"></select></td>
		</tr>
		<tr>
			<th>{{${_3__sleep_def}.name}}</th>
			<td>{{${_3__sleep_def}.description}}
			<select ng-model="${_3__sleep_ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${_3__sleep_def}.selections" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }" ng-change="execute()"></select></td>
		</tr>
		<tr>
			<th>{{${_4__appetite_def}.name}}</th>
			<td>{{${_4__appetite_def}.description}}
			<select ng-model="${_4__appetite_ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${_4__appetite_def}.selections" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }" ng-change="execute()"></select></td>
		</tr>
		<tr>
			<th>{{${_5__ability_to_concentrate_def}.name}}</th>
			<td>{{${_5__ability_to_concentrate_def}.description}}
			<select ng-model="${_5__ability_to_concentrate_ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${_5__ability_to_concentrate_def}.selections" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }" ng-change="execute()"></select></td>
		</tr>
		<tr>
			<th>{{${_6__initiative_def}.name}}</th>
			<td>{{${_6__initiative_def}.description}}
			<select ng-model="${_6__initiative_ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${_6__initiative_def}.selections" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }" ng-change="execute()"></select></td>
		</tr>
		<tr>
			<th>{{${_7__emotional_involvement_def}.name}}</th>
			<td>{{${_7__emotional_involvement_def}.description}}
			<select ng-model="${_7__emotional_involvement_ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${_7__emotional_involvement_def}.selections" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }" ng-change="execute()"></select></td>
		</tr>
		<tr>
			<th>{{${_8__pessimism_def}.name}}</th>
			<td>{{${_8__pessimism_def}.description}}
			<select ng-model="${_8__pessimism_ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${_8__pessimism_def}.selections" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }" ng-change="execute()"></select></td>
		</tr>
		<tr>
			<th>{{${_9__zest_for_life_def}.name}}</th>
			<td>{{${_9__zest_for_life_def}.description}}
			<select ng-model="${_9__zest_for_life_ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${_9__zest_for_life_def}.selections" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }" ng-change="execute()"></select></td>
		</tr>
		<tr style="border-top: 2px solid">
			<th bgcolor="#FFFFF"><h4>{{${total_score_def}.name}}:</h4></th>
			<td bgcolor="#FFFFF"><h5>{{${total_score_cds_data}.value.magnitude}} - {{${grade_of_depression_cds_data}.value.value}}</h5></td>
		</tr>
		</tbody>
	</table>
    </form>
    </div>
    </div>
</div>
<style>
 select { margin: 15px 0 15px; background-color:white;}
</style>
</body>
</html>