<!DOCTYPE html><html ng-app="cds_app">
<head>
<title>{{def.concept.name}}</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" type="text/css" href="wro/foundation.css"/>
<link rel="stylesheet" type="text/css" href="wro/date-picker.css"/>
<link rel="stylesheet" type="text/css" href="wro/angular.css"></link>
<script type="text/javascript" src="wro/angular.js"></script>
<link rel="text/javascript" type="text/css" href="wro/foundation.js"/>
<script type="text/javascript" src="wro/moment.js"></script>
<script type="text/javascript" src="wro/date-picker.js"></script>
<script type="text/javascript" src="wro/app_lib.js"></script>
<script id="decision-support-view" type="application/json">{
"dsViewId": "GCS.v1",
  "language": {
    "originalLanguage": {
      "terminologyId": {
        "name": "ISO_639-1",
        "value": "ISO_639-1"
      },
      "codeString": "en"
    }
  },
  "decisionSupportViewDefinitions": {
    "en": {
      "name": "Glasgow Coma Scale",
      "description": "Fifteen point scale used to assess impairment of consciousness in response to defined stimuli."
    },
    "sv": {
      "name": "Glasgow coma scale",
      "description": "Glasgow Coma Scale är en skala som används för att bedöma medvetandegraden. Skalan består av tre tester: ögonöppning, verbalt svar och motoriskt svar. Maximal poäng är 15. "
    }
  },
  "resourceDescription": {
    "originalAuthor": {
      "name": "Jimmy Axelsson"
    },
    "otherContributors": [],
    "details": {
      "en": {
        "purpose": "",
        "keywords": [],
        "use": "",
        "misuse": ""
      },
      "se": {
        "purpose": "",
        "keywords": [],
        "use": "",
        "misuse": ""
      }
    },
    "otherDetails": {
      "references": "Teasdale G. Glasgow Coma Scale: The Glasgow structured approach to Assessment of the Glasgow Coma Scale [Internet]. Sir Graham Teasdale; 2014 {cited 2015 Apr 20]. Available from: http://www.glasgowcomascale.org/ and http://www.glasgowcomascale.org/downloads/GCS-Assessment-Aid.pdf."
    }
  },
  "alertGuideIds": [],
  "executionGuideIds": [
    "Glasgow_Coma_Scale.v1"
  ],
  "alertBindings": {},
  "termDefinitions": {
    "en": {
      "id": "en",
      "terms": {}
    },
    "sv": {
      "id": "sv",
      "terms": {}
    }
  }
}</script>
</head>
<body ng-controller="cds_controller">


<#assign glasgow_coma_scale_entry_ehr_data = "data.ehr['openEHR-EHR-OBSERVATION.glasgow_coma_scale.v1']">
<#assign glasgow_coma_scale_entry_cds_data = "data.cds['openEHR-EHR-OBSERVATION.glasgow_coma_scale.v1']">
<#assign glasgow_coma_scale_entry_def = "def.entries['openEHR-EHR-OBSERVATION.glasgow_coma_scale.v1']">
<#assign total_score_def = glasgow_coma_scale_entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0026}']">
<#assign best_motor_response__m__def = glasgow_coma_scale_entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0008}']">
<#assign best_eye_response__e__def = glasgow_coma_scale_entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0009}']">
<#assign event_time_def = glasgow_coma_scale_entry_def + ".elements['/data/events/time']">
<#assign best_verbal_response__v__def = glasgow_coma_scale_entry_def + ".elements['/data{at0001}/events{at0002}/data{at0003}/items{at0007}']">
<#assign total_score_ehr_data = glasgow_coma_scale_entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0026}']">
<#assign best_motor_response__m__ehr_data = glasgow_coma_scale_entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0008}']">
<#assign best_eye_response__e__ehr_data = glasgow_coma_scale_entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0009}']">
<#assign event_time_ehr_data = glasgow_coma_scale_entry_ehr_data + "[0].elements['/data/events/time']">
<#assign best_verbal_response__v__ehr_data = glasgow_coma_scale_entry_ehr_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0007}']">
<#assign total_score_cds_data = glasgow_coma_scale_entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0026}']">
<#assign best_motor_response__m__cds_data = glasgow_coma_scale_entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0008}']">
<#assign best_eye_response__e__cds_data = glasgow_coma_scale_entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0009}']">
<#assign event_time_cds_data = glasgow_coma_scale_entry_cds_data + "[0].elements['/data/events/time']">
<#assign best_verbal_response__v__cds_data = glasgow_coma_scale_entry_cds_data + "[0].elements['/data{at0001}/events{at0002}/data{at0003}/items{at0007}']">
<#assign glasgow_coma_scale_assessment_entry_cds_data = "data.cds['openEHR-EHR-EVALUATION.glasgow_coma_scale_assessment.v1']">
<#assign glasgow_coma_scale_assessment_entry_def = "def.entries['openEHR-EHR-EVALUATION.glasgow_coma_scale_assessment.v1']">
<#assign severity_of_brain_injury_def = glasgow_coma_scale_assessment_entry_def + ".elements['/data{at0001}/items{at0003}']">
<#assign severity_of_brain_injury_cds_data = glasgow_coma_scale_assessment_entry_cds_data + "[0].elements['/data{at0001}/items{at0003}']">

<script>
  angular.module('cds_app').controller('GCS_Controller', function($scope, $window){
    $scope.$on('json_loaded', function(){
      $scope.${event_time_ehr_data}.value.value = $window.getCurrentDate();
    });
    $scope.$on('executeEnd', function() {
      $scope.severeBrainInjury=false;
      $scope.moderateBrainInjury=false;
      $scope.mildBrainInjury=false;
      if ($scope.${total_score_cds_data}.value.magnitude < 9) {
        $scope.severeBrainInjury=true;
      }
      if ($scope.${total_score_cds_data}.value.magnitude >= 9 && $scope.${total_score_cds_data}.value.magnitude < 13) {
        $scope.moderateBrainInjury=true;
      }
      if ($scope.${total_score_cds_data}.value.magnitude >=13) {
        $scope.mildBrainInjury=true;
      }
    });
  });
  </script>


<div ng-show="ready" ng-controller="GCS_Controller"> 
<div class="row">
<div class="medium-offset-3 medium-6 column">
<h1>{{def.concept.name}}</h1>
</div>
</div>
<div class="row">
<div class="medium-offset-3 medium-6 column">
<form name="form">
<fieldset>
<legend>{{${glasgow_coma_scale_entry_def}.name}}</legend>
<label>{{${best_eye_response__e__def}.name}}</label>
<div class="row collapse" title="{{${best_eye_response__e__def}.description}}">
<div class="medium-12 columns">
<select ng-model="${best_eye_response__e__ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${best_eye_response__e__def}.selections"  ng-change="execute()" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"></select>
</div>
</div>
<label>{{${best_verbal_response__v__def}.name}}</label>
<div class="row collapse" title="{{${best_verbal_response__v__def}.description}}">
<div class="medium-12 columns">
<select ng-model="${best_verbal_response__v__ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${best_verbal_response__v__def}.selections"  ng-change="execute()" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"></select>
</div>
</div>
<label>{{${best_motor_response__m__def}.name}}</label>
<div class="row collapse" title="{{${best_motor_response__m__def}.description}}">
<div class="medium-12 columns">
<select ng-model="${best_motor_response__m__ehr_data}.value.selection" ng-options="key as (key.charAt(0) + ' - ' + desc) for (key, desc) in ${best_motor_response__m__def}.selections"  ng-change="execute()" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"></select>
</div>
</div>
</form>
</fieldset>
<fieldset>
<legend>{{${total_score_def}.name}}</legend>
<div class="medium-6 column">
<div class="row">
<div class="medium-12 columns">
<b>{{${total_score_def}.name}}: {{(${best_eye_response__e__ehr_data}.value.selection | limitTo:1) -- (${best_verbal_response__v__ehr_data}.value.selection | limitTo:1) -- (${best_motor_response__m__ehr_data}.value.selection | limitTo:1)}} </b>
<p> ({{"E" + (${best_eye_response__e__ehr_data}.value.selection | limitTo:1) + "V" + (${best_verbal_response__v__ehr_data}.value.selection | limitTo:1) + "M" + (${best_motor_response__m__ehr_data}.value.selection | limitTo:1)}})</p>
</div>
</div>
<div class="row">
<div class="medium-12 columns">
</div>
</div>
</fieldset>
<fieldset>
<legend>{{${severity_of_brain_injury_def}.name}}</legend>
<p class="guideline-recommendation" ng-class="{'mildbraininjury' : mildBrainInjury,'moderatebraininjury' : moderateBrainInjury,'severebraininjury': severeBrainInjury}">{{${severity_of_brain_injury_cds_data}.value.value}}</p>
</fieldset>
</div>
</div>
</div>
</div>
<style>
    body{background-color: #e7efff;}
    h1{text-align: center;}
    fieldset legend{background-color: transparent;}
    .guideline-recommendation {
      border-radius: 0px;
      border: 1px dotted #000;
      padding: 0px 5px;
      line-height: 32px;
      height: 32px;
    }
    .mildbraininjury {
      background-color: #e6ffcc;
      border-color: #BB0;
      color: #000;
    } 
    .moderatebraininjury {
      background-color: #ffffcc;
      border-color: #BB0;
      color: #000;
    } 
    .severebraininjury {
      background-color: #ffe6cc;
      border-color: #BB0;
      color: #000;
    } 

  </style>
</body>
</html>