{
  "id": "BWH_Egg_Freezing_Counseling_Tool_EFCT_guideline.v1",
  "gdl_version": "2.0",
  "concept": "gt0001",
  "language": {
    "original_language": "ISO_639-1::en"
  },
  "description": {
    "original_author": {
      "date": "2020-10-09",
      "name": "Maryam Razavi",
      "organisation": "CambioCDS",
      "email": "maryam.razavi@cambio.se"
    },
    "lifecycle_state": "Author draft",
    "details": {
      "en": {
        "id": "en",
        "purpose": "To predict the probability of a woman having at least one live birth(s) based on her age at egg retrieval and the number of mature oocytes frozen. ",
        "keywords": [
          "elective egg freezing",
          "oocyte cryopreservation",
          "fertility preservation",
          "Egg Freezing"
        ],
        "use": "Use in women age 24–44 years undergoing fertility counseling.\nFormula:\np(Livebirth) = 1 – [1 – 0.6 × p(Euploid) × p(Blast)] ^ (Number of mature eggs)\nwhere\np(Blast) = 0.95 × exp(2.8043 – 0.1112 × Age) if Age <36\np(Blast) = 0.85 × exp(2.8043 – 0.1112 × Age) if Age ≥36\nand\np(Euploid) is as below (Age (years), p(Euploid)):\nEgg donors (for reference)= 0.647\n≤35=0.574\n36=0.564\n37=0.486\n38=0.466\n39=0.440\n40=0.359\n41=0.327\n42=0.285\n43=0.206\n44=0.127",
        "misuse": "Not to use in age <24 and age>44.\nIMPORTANT: This calculator is not externally validated, and as such, should be used with caution.",
        "copyright": "@CambioCDS"
      }
    },
    "other_details": {
      "references": "1. Goldman RH, Racowsky C, Farland LV, Munné S, Ribustello L, Fox JH. Predicting the likelihood of live birth for elective oocyte cryopreservation: a counseling tool for physicians and patients. Hum Reprod. 2017;32(4):853-859. \n"
    }
  },
  "definition": {
    "data_bindings": {
      "gt0002": {
        "id": "gt0002",
        "model_id": "openEHR-EHR-OBSERVATION.basic_demographic.v1",
        "template_id": "openEHR-EHR-OBSERVATION.basic_demographic.v1",
        "type": "INPUT",
        "elements": {
          "gt0003": {
            "id": "gt0003",
            "path": "/data[at0001]/events[at0002]/data[at0003]/items[at0013]"
          }
        }
      },
      "gt0004": {
        "id": "gt0004",
        "model_id": "openEHR-EHR-OBSERVATION.bwh_egg_freezing_counseling_tool.v0",
        "template_id": "openEHR-EHR-OBSERVATION.bwh_egg_freezing_counseling_tool.v0",
        "type": "INPUT",
        "elements": {
          "gt0005": {
            "id": "gt0005",
            "path": "/data[at0001]/events[at0002]/data[at0003]/items[at0004]"
          }
        }
      },
      "gt0006": {
        "id": "gt0006",
        "model_id": "openEHR-EHR-OBSERVATION.bwh_egg_freezing_counseling_tool.v0",
        "template_id": "openEHR-EHR-OBSERVATION.bwh_egg_freezing_counseling_tool.v0",
        "type": "OUTPUT",
        "elements": {
          "gt0008": {
            "id": "gt0008",
            "path": "/data[at0001]/events[at0002]/data[at0003]/items[at0005]"
          },
          "gt0014": {
            "id": "gt0014",
            "path": "/data[at0001]/events[at0002]/data[at0003]/items[at0007]"
          },
          "gt0025": {
            "id": "gt0025",
            "path": "/data[at0001]/events[at0002]/data[at0003]/items[at0019]"
          },
          "gt0009": {
            "id": "gt0009",
            "path": "/data[at0001]/events[at0002]/data[at0003]/items[at0006]"
          }
        }
      }
    },
    "pre_conditions": [
      "$gt0003|Age|>=24,a",
      "$gt0003|Age|<=44,a"
    ],
    "rules": {
      "gt0011": {
        "id": "gt0011",
        "priority": 13,
        "when": [
          "$gt0003|Age|<36,a"
        ],
        "then": [
          "$gt0009|p(Blast)|.magnitude=0.95*exp(2.8043-0.1112*$gt0003.magnitude)",
          "$gt0009|p(Blast)|.precision=4",
          "$gt0009|p(Blast)|.unit='1'"
        ]
      },
      "gt0012": {
        "id": "gt0012",
        "priority": 12,
        "when": [
          "$gt0003|Age|>=36,a"
        ],
        "then": [
          "$gt0009|p(Blast)|.magnitude=0.85*exp(2.8043-0.1112*$gt0003.magnitude)",
          "$gt0009|p(Blast)|.precision=4"
        ]
      },
      "gt0013": {
        "id": "gt0013",
        "priority": 11,
        "when": [
          "$gt0003|Age|<=35,a"
        ],
        "then": [
          "$gt0014|p(Euploid)|=574|local::at0009|≤35|"
        ]
      },
      "gt0015": {
        "id": "gt0015",
        "priority": 10,
        "when": [
          "$gt0003|Age|==36,a"
        ],
        "then": [
          "$gt0014|p(Euploid)|=564|local::at0010|36|"
        ]
      },
      "gt0016": {
        "id": "gt0016",
        "priority": 9,
        "when": [
          "$gt0003|Age|==37,a"
        ],
        "then": [
          "$gt0014|p(Euploid)|=486|local::at0011|37|"
        ]
      },
      "gt0017": {
        "id": "gt0017",
        "priority": 8,
        "when": [
          "$gt0003|Age|==38,a"
        ],
        "then": [
          "$gt0014|p(Euploid)|=466|local::at0012|38|"
        ]
      },
      "gt0018": {
        "id": "gt0018",
        "priority": 7,
        "when": [
          "$gt0003|Age|==39,a"
        ],
        "then": [
          "$gt0014|p(Euploid)|=440|local::at0013|39|"
        ]
      },
      "gt0019": {
        "id": "gt0019",
        "priority": 6,
        "when": [
          "$gt0003|Age|==40,a"
        ],
        "then": [
          "$gt0014|p(Euploid)|=359|local::at0014|40|"
        ]
      },
      "gt0020": {
        "id": "gt0020",
        "priority": 5,
        "when": [
          "$gt0003|Age|==41,a"
        ],
        "then": [
          "$gt0014|p(Euploid)|=327|local::at0015|41|"
        ]
      },
      "gt0021": {
        "id": "gt0021",
        "priority": 4,
        "when": [
          "$gt0003|Age|==42,a"
        ],
        "then": [
          "$gt0014|p(Euploid)|=285|local::at0016|42|"
        ]
      },
      "gt0022": {
        "id": "gt0022",
        "priority": 3,
        "when": [
          "$gt0003|Age|==43,a"
        ],
        "then": [
          "$gt0014|p(Euploid)|=206|local::at0017|43|"
        ]
      },
      "gt0023": {
        "id": "gt0023",
        "priority": 2,
        "when": [
          "$gt0003|Age|==44,a"
        ],
        "then": [
          "$gt0014|p(Euploid)|=127|local::at0018|44|"
        ]
      },
      "gt0010": {
        "id": "gt0010",
        "priority": 1,
        "when": [
          "$gt0003|Age|!=null",
          "$gt0005|Number of mature eggs|!=null"
        ],
        "then": [
          "$gt0008|p(Livebirth)|.magnitude=(1-(1-0.6*($gt0014.value/1000)*$gt0009.magnitude)^$gt0005.magnitude)*100",
          "$gt0008|p(Livebirth)|.precision=4",
          "$gt0008|p(Livebirth)|.unit='%'"
        ]
      }
    }
  },
  "ontology": {
    "term_definitions": {
      "en": {
        "id": "en",
        "terms": {
          "gt0001": {
            "id": "gt0001",
            "text": "BWH Egg Freezing Counseling Tool (EFCT)",
            "description": "Brigham and Women's Hospital (BWH) Egg Freezing Counseling Tool (EFCT) predicts likelihood of live birth for elective egg freezing in women. \n"
          },
          "gt0003": {
            "id": "gt0003",
            "text": "Age",
            "description": "Age in years, and for babies: months, weeks or days"
          },
          "gt0005": {
            "id": "gt0005",
            "text": "Number of mature eggs",
            "description": "*"
          },
          "gt0008": {
            "id": "gt0008",
            "text": "p(Livebirth)",
            "description": "*"
          },
          "gt0009": {
            "id": "gt0009",
            "text": "p(Blast)",
            "description": "*"
          },
          "gt0010": {
            "id": "gt0010",
            "text": "Set p(Livebirth) calculation"
          },
          "gt0011": {
            "id": "gt0011",
            "text": "Set p(Blast) for age<36"
          },
          "gt0012": {
            "id": "gt0012",
            "text": "Set p(Blast) for age>=36"
          },
          "gt0013": {
            "id": "gt0013",
            "text": "Set p(Euploid) Age ≤35"
          },
          "gt0014": {
            "id": "gt0014",
            "text": "p(Euploid)",
            "description": "p(Euploid) is the proportion of euploid blastocysts expected for a given age."
          },
          "gt0015": {
            "id": "gt0015",
            "text": "Set p(Euploid) Age 36"
          },
          "gt0016": {
            "id": "gt0016",
            "text": "Set p(Euploid) Age 37"
          },
          "gt0017": {
            "id": "gt0017",
            "text": "Set p(Euploid) Age 38"
          },
          "gt0018": {
            "id": "gt0018",
            "text": "Set p(Euploid) Age 39"
          },
          "gt0019": {
            "id": "gt0019",
            "text": "Set p(Euploid) Age 40"
          },
          "gt0020": {
            "id": "gt0020",
            "text": "Set p(Euploid) Age 41"
          },
          "gt0021": {
            "id": "gt0021",
            "text": "Set p(Euploid) Age 42"
          },
          "gt0022": {
            "id": "gt0022",
            "text": "Set p(Euploid) Age 43"
          },
          "gt0023": {
            "id": "gt0023",
            "text": "Set p(Euploid) Age 44"
          },
          "gt0025": {
            "id": "gt0025",
            "text": "Warning, Age is",
            "description": "*"
          }
        }
      }
    }
  }
}